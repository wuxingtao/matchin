{"version":3,"sources":["../webpack/universalModuleDefinition","pages/home/index.jsx","pages/list/index.jsx","App.jsx","index.js"],"names":["root","factory","exports","module","define","amd","this","Home","style","padding","fetchVegetable","page","pageSize","fetch","method","headers","body","JSON","stringify","query","then","res","json","Column","Table","List","useState","data","setData","setPage","pageInfo","setPageInfo","useEffect","console","log","a","result","vegetableList","items","current","total","onChange","title","rowKey","dataSource","pagination","dataIndex","render","text","src","menus","key","route","BASE_NAME","window","__POWERED_BY_QIANKUN__","App","refresh","setRefresh","selectedKeys","setSelectKeys","pathname","location","menu","find","item","basename","onClick","mode","map","Item","to","fallback","exact","path","component","ReactDOM","document","getElementById","bootstrap","mount","props","unmount","unmountComponentAtNode"],"mappings":"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","file":"static/js/main.9841e70c.chunk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactMicroApp\"] = factory();\n\telse\n\t\troot[\"ReactMicroApp\"] = factory();\n})(this, function() {\nreturn ","import React from \"react\";\n\nconst Home = () => <section style={{ padding: 20 }}>React App</section>\n\nexport default Home;","import React, { useState, useEffect } from \"react\";\nimport { Card, Table, Avatar } from \"antd\";\nimport fetch from \"isomorphic-fetch\";\n\nconst fetchVegetable = (page, pageSize) => {\n  return fetch(\"http://dev-api.jt-gmall.com/mall\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    // graphql 的查询风格\n    body: JSON.stringify({\n      query: `{ vegetableList (page: ${page}, pageSize: ${pageSize}) { page, pageSize, total, items { _id, name, poster, price } } }`,\n    }),\n  }).then((res) => res.json());\n};\n\nconst { Column } = Table;\nconst List = () => {\n  // 设置列表信息\n  const [data, setData] = useState([]);\n  // 设置页码信息\n  const [page, setPage] = useState(1);\n  const [pageInfo, setPageInfo] = useState();\n\n  useEffect(() => {\n    console.log({ page });\n    (async () => {\n      const result = await fetchVegetable(page, 10);\n      const { vegetableList } = result.data;\n      setData(() => vegetableList.items);\n      setPageInfo(() => ({\n        current: vegetableList.page,\n        pageSize: vegetableList.pageSize,\n        total: vegetableList.total,\n        onChange: (page) => setPage(page),\n      }));\n    })();\n  }, [page]);\n\n  return (\n    <Card title=\"React 子应用列表页\">\n      <Table rowKey=\"_id\" dataSource={data} pagination={pageInfo}>\n        <Column dataIndex=\"poster\" render={(text) => <Avatar src={text} />} />\n        <Column dataIndex=\"name\" />\n        <Column dataIndex=\"price\" render={(text) => <>￥ {text}</>} />\n      </Table>\n    </Card>\n  );\n};\n\nexport default List;\n","import React, { Suspense, useState, useEffect } from \"react\";\nimport { Menu } from \"antd\";\nimport { BrowserRouter as Router, Route, Switch, Link } from \"react-router-dom\";\n\nimport Home from \"./pages/home\";\nimport List from \"./pages/list\";\n\nconst menus = [\n  {\n    key: \"react\",\n    route: \"/\",\n    title: \"主页\",\n  },\n  {\n    key: \"react-list\",\n    route: \"/list\",\n    title: \"列表页\",\n  },\n];\n\nconst BASE_NAME = window.__POWERED_BY_QIANKUN__ ? \"/react\" : \"\";\nconst App = () => {\n  const [refresh, setRefresh] = useState(0);\n  const [selectedKeys, setSelectKeys] = useState([\"react\"]);\n  useEffect(() => {\n    const { pathname } = window.location;\n    const menu = menus.find((item) => `${BASE_NAME}${item.route}` === pathname);\n    setSelectKeys(() => [menu ? menu.key : \"react\"]);\n  }, [refresh]);\n\n  // 设置路由命名空间\n  return (\n    <Router basename={BASE_NAME}>\n      <section>\n        <Menu\n          onClick={() => setRefresh((refresh) => ++refresh)}\n          selectedKeys={selectedKeys}\n          mode=\"horizontal\"\n        >\n          {menus.map((item) => (\n            <Menu.Item key={item.key}>\n              <Link to={item.route}>{item.title}</Link>\n            </Menu.Item>\n          ))}\n        </Menu>\n        <Suspense fallback={null}>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/list\" component={List} />\n          </Switch>\n        </Suspense>\n      </section>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"antd/dist/antd.css\";\n\nimport \"./public-path\";\nimport App from \"./App.jsx\";\n\n/**\n * 渲染函数\n * 两种情况：主应用生命周期钩子中运行 / 微应用单独启动时运行\n */\nfunction render() {\n  ReactDOM.render(<App />, document.getElementById(\"root\"));\n}\n\n// 独立运行时，直接挂载应用\nif (!window.__POWERED_BY_QIANKUN__) {\n  render();\n}\n\n/**\n * bootstrap 只会在微应用初始化的时候调用一次，下次微应用重新进入时会直接调用 mount 钩子，不会再重复触发 bootstrap。\n * 通常我们可以在这里做一些全局变量的初始化，比如不会在 unmount 阶段被销毁的应用级别的缓存等。\n */\nexport async function bootstrap() {\n  console.log(\"ReactMicroApp bootstraped\");\n}\n\n/**\n * 应用每次进入都会调用 mount 方法，通常我们在这里触发应用的渲染方法\n */\nexport async function mount(props) {\n  console.log(\"ReactMicroApp mount\", props);\n  render(props);\n}\n\n/**\n * 应用每次 切出/卸载 会调用的方法，通常在这里我们会卸载微应用的应用实例\n */\nexport async function unmount() {\n  console.log(\"ReactMicroApp unmount\");  \n  ReactDOM.unmountComponentAtNode(document.getElementById(\"root\"));\n}\n"],"sourceRoot":""}